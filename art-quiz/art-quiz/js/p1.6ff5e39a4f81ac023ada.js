(()=>{"use strict";const t=new class{constructor(){this.isVolume=localStorage.getItem("isVolume")||"false",this.volume=localStorage.getItem("volume")||.1,this.isTime=localStorage.getItem("isTime")||"false",this.time=localStorage.getItem("time")||20}setIsVolume(){localStorage.setItem("isVolume",this.isVolume)}setVolume(){localStorage.setItem("volume",this.volume)}setIsTime(){localStorage.setItem("isTime",this.isTime)}setTime(){localStorage.setItem("time",this.time)}},e=class{constructor(){this.questions=[]}},n=class{constructor(t){this.imageNum=t,this.title=null,this.type=null,this.options=[],this.author=null,this.name=null,this.year=null,this.status=null,this.loadStatus()}setStatus(t){let e;localStorage.getItem("statusArr")||(e=["no answers"],localStorage.setItem("statusArr",JSON.stringify(e))),this.status=t,e=JSON.parse(localStorage.getItem("statusArr")),e[this.imageNum]=this.status,localStorage.setItem("statusArr",JSON.stringify(e))}loadStatus(){let t;localStorage.getItem("statusArr")||(t=[],localStorage.setItem("statusArr",JSON.stringify(t))),this.status=JSON.parse(localStorage.getItem("statusArr"))[this.imageNum]}},s=class{constructor(t,e,n,s,a){this.imageNum=t,this.author=e,this.name=n,this.year=s,this.isCorrect=a}},a=new class{constructor(){this.settings=t,this.categories=[]}async buildState(){function t(t){for(let e=t.length-1;e>0;e--){const n=Math.floor(Math.random()*(e+1));[t[e],t[n]]=[t[n],t[e]]}}function a(t){(new Image).src=t}const o=await fetch("../assets/json/images-information.json"),r=await o.json();r.forEach((({imageNum:t})=>{const e=`https://raw.githubusercontent.com/darya-startsava/image-data/master/img/${t}.jpg`;a(`https://raw.githubusercontent.com/darya-startsava/image-data/master/full/${t}full.jpg`),a(e)}));const i=a=>{let o=0,i=12;"findPicture"===a&&(o+=12,i+=12);for(let c=o;c<i;c++){const o=new e;this.categories.push(o);for(let e=0;e<10;e++){const{author:i,name:u,year:l,imageNum:d}=r[10*c+e],m=new n(d);o.questions.push(m),m.type=a,"findAuthor"===m.type?m.title="Кто автор этой картины?":m.title=`Какую из этих картин написал ${i}?`;const g=new s(d,i,u,l,!0);m.options.push(g),m.author=g.author,m.name=g.name,m.year=g.year;const b=4,p=r.length-2;for(;m.options.length<b;){const t=Math.floor(Math.random()*(p+1)),{author:e,name:n,year:a,imageNum:o}=r[t];if(m.options.every((t=>t.author!==e&&t.imageNum!==o))){const t=new s(o,e,n,a,!1);m.options.push(t)}}t(m.options)}}};i("findAuthor"),i("findPicture")}},o=document.querySelector("main"),r=function t(e,n,s){const r=a.categories[n].questions[s],{imageNum:i}=r;o.innerHTML=`<h3 class="title">Кто автор этой картины?</h3>\n<div class="time-left">&nbsp;</div>\n<div class="image-author-quiz-wrapper">\n    <div class="image-author-quiz" id="image-author-quiz" style="background-image:url(https://raw.githubusercontent.com/darya-startsava/image-data/master/img/${i}.jpg)" ></div>\n</div>\n<div class="answers-author-quiz-wrapper">\n    <button type="button" class="answer-author-button" data-isCorrect="${r.options[0].isCorrect}" >${r.options[0].author}</button>\n    <button type="button" class="answer-author-button" data-isCorrect="${r.options[1].isCorrect}" >${r.options[1].author}</button>\n    <button type="button" class="answer-author-button" data-isCorrect="${r.options[2].isCorrect}" >${r.options[2].author}</button>\n    <button type="button" class="answer-author-button" data-isCorrect="${r.options[3].isCorrect}" >${r.options[3].author}</button>\n    <div class="window-correct-answer">\n        <div class="correct-answer-message"></div>\n        <div class="correct-answer-image-with-information">\n            <img src="https://raw.githubusercontent.com/darya-startsava/image-data/master/full/${i}full.jpg"\n                alt="тут должна быть картина" class="correct-answer-picture">\n            <div class="window-correct-answer-right-block">\n                <div class="correct-answer-information">Автор: ${r.author}<br>\n                   Название картины: ${r.name}<br>\n                    год: ${r.year}\n                </div>\n                <button type="button" class="continue-button">Продолжить</button>\n            </div>\n        </div>\n    </div>\n    <div class="end-quiz-window">\n        <div class="end-quiz-message"></div>\n        <button type="button" class="back-to-button" id="go-to-categories-button">Продолжить</button>\n    </div>\n</div>\n<div class="buttons-wrapper">\n    <button type="button" class="back-to-button" id="back-to-start-button" >На главную</button>\n    <button type="button" class="back-to-button" id="back-to-categories-button">Категории</button>\n</div>`;const c=document.querySelector(".answers-author-quiz-wrapper"),u=document.querySelector("#back-to-start-button"),l=document.querySelector("#back-to-categories-button"),d=document.querySelector("#go-to-categories-button"),g=document.querySelector(".continue-button"),b=document.querySelector(".window-correct-answer"),p=document.querySelector(".correct-answer-message"),y=document.querySelector(".end-quiz-window"),v=document.querySelector(".end-quiz-message"),w=document.querySelector(".time-left");let S,f=a.settings.time;function q(t){"true"===a.settings.isTime&&clearInterval(S);const e=new Audio(t);"true"===a.settings.isVolume?e.volume=a.settings.volume:e.volume=0,e.play()}function k(t){b.style.visibility="visible",b.style.opacity=1,t?(b.style.backgroundColor="var(--right-answer-color)",p.innerHTML="Верно!",r.setStatus("right"),q("../assets/mp3/right.mp3")):(b.style.backgroundColor="var(--wrong-answer-color)",p.innerHTML="Неверно.",r.setStatus("wrong"),q("../assets/mp3/wrong.mp3"))}"true"===a.settings.isTime&&(S=setInterval((()=>{w.innerHTML=`У вас осталось ${f} секунд для ответа.`,f--,-1===f&&k(!1)}),1e3)),d.addEventListener("click",(()=>m(e))),u.addEventListener("click",(()=>{"true"===a.settings.isTime&&clearInterval(S),h()})),l.addEventListener("click",(()=>{"true"===a.settings.isTime&&clearInterval(S),m(e)})),c.addEventListener("click",(t=>{"answer-author-button"===t.target.className&&k(JSON.parse(t.target.dataset.iscorrect))})),g.addEventListener("click",(function(){b.style.display="none",9===s?function(){y.style.visibility="visible",y.style.opacity=1,y.style.backgroundColor="var(--end-quiz-color)";let t=0;for(const e of a.categories[n].questions)"right"===e.status&&t++;v.innerHTML=` Конец игры! <br> Ваш результат:<br> ${t}/10`}():(s++,t(e,n,s))}))},i=document.querySelector("main"),c=function t(e,n,s){const o=a.categories[n].questions[s],{imageNum:r}=o;i.innerHTML=`<h3 class="title">Какую картину написал<br> ${o.author} ?</h3>\n    <div class="time-left">&nbsp;</div>\n        <div class="answers-pictures-quiz-wrapper">\n            <button type="button" class="answer-picture-button" style="background-image:url(https://raw.githubusercontent.com/darya-startsava/image-data/master/img/${o.options[0].imageNum}.jpg)" data-isCorrect="${o.options[0].isCorrect}" ></button>\n            <button type="button" class="answer-picture-button" style="background-image:url(https://raw.githubusercontent.com/darya-startsava/image-data/master/img/${o.options[1].imageNum}.jpg)" data-isCorrect="${o.options[1].isCorrect}" ></button>\n            <button type="button" class="answer-picture-button" style="background-image:url(https://raw.githubusercontent.com/darya-startsava/image-data/master/img/${o.options[2].imageNum}.jpg)" data-isCorrect="${o.options[2].isCorrect}" ></button>\n            <button type="button" class="answer-picture-button" style="background-image:url(https://raw.githubusercontent.com/darya-startsava/image-data/master/img/${o.options[3].imageNum}.jpg)" data-isCorrect="${o.options[3].isCorrect}" ></button>\n            <div class="window-correct-answer">\n                <div class="correct-answer-message"></div>\n                <div class="correct-answer-image-with-information">\n                    <img src="https://raw.githubusercontent.com/darya-startsava/image-data/master/full/${r}full.jpg"\n                        alt="тут должна быть картина" class="correct-answer-picture">\n                    <div class="window-correct-answer-right-block">\n                        <div class="correct-answer-information">Автор: ${o.author}<br>\n                            name: ${o.name}<br>\n                            year: ${o.year}\n                        </div>\n                        <button type="button" class="continue-button">Продолжить</button>\n                    </div>\n                </div>\n            </div>\n        <div class="end-quiz-window">\n            <div class="end-quiz-message"></div>\n            <button type="button" class="back-to-button" id="go-to-categories-button">Продолжить</button>\n        </div>\n    </div>\n    <div class="buttons-wrapper">\n        <button type="button" class="back-to-button" id="back-to-start-button">На главную</button>\n        <button type="button" class="back-to-button" id="back-to-categories-button">Категории</button>\n    </div>`;const c=document.querySelector(".answers-pictures-quiz-wrapper"),u=document.querySelector("#back-to-start-button"),l=document.querySelector("#back-to-categories-button"),d=document.querySelector("#go-to-categories-button"),g=document.querySelector(".continue-button"),b=document.querySelector(".window-correct-answer"),p=document.querySelector(".correct-answer-message"),y=document.querySelector(".end-quiz-window"),v=document.querySelector(".end-quiz-message"),w=document.querySelector(".time-left");let S,f=a.settings.time;function q(t){"true"===a.settings.isTime&&clearInterval(S);const e=new Audio(t);"true"===a.settings.isVolume?e.volume=a.settings.volume:e.volume=0,e.play()}function k(t){b.style.visibility="visible",b.style.opacity=1,t?(b.style.backgroundColor="var(--right-answer-color)",p.innerHTML="Верно!",o.setStatus("right"),q("../assets/mp3/right.mp3")):(b.style.backgroundColor="var(--wrong-answer-color)",p.innerHTML="Неверно.",o.setStatus("wrong"),q("../assets/mp3/wrong.mp3"))}"true"===a.settings.isTime&&(S=setInterval((()=>{w.innerHTML=`У вас осталось ${f} секунд для ответа.`,f--,-1===f&&k(!1)}),1e3)),d.addEventListener("click",(()=>m(e))),u.addEventListener("click",(()=>{"true"===a.settings.isTime&&clearInterval(S),h()})),l.addEventListener("click",(()=>{"true"===a.settings.isTime&&clearInterval(S),m(e)})),c.addEventListener("click",(t=>{"answer-picture-button"===t.target.className&&k(JSON.parse(t.target.dataset.iscorrect))})),g.addEventListener("click",(function(){b.style.display="none",9===s?function(){y.style.visibility="visible",y.style.opacity=1,y.style.backgroundColor="var(--end-quiz-color)";let t=0;for(const e of a.categories[n].questions)"right"===e.status&&t++;v.innerHTML=` Конец игры! <br> Ваш результат:<br> ${t}/10`}():(s++,t(e,n,s))}))},u=document.querySelector("main"),l=document.querySelector("body"),d=document.querySelector("main"),m=function(t){d.innerHTML='<h2 class="title">Категории</h2>\n    <h3 class="title" id="category-title"></h3>\n    <div class="categories-wrapper">\n        <div class="categories">\n        </div>\n    </div>\n    <div class="button-wrapper">\n        <button type="button" class="back-to-start-button">На главную</button>\n    </div>',l.style.backgroundImage="none";document.getElementById("category-title").innerHTML="findArtist"===t?"Угадайте автора картины":"Угадайте картину по автору";const e=document.querySelector(".categories");!function(){let n=1,s=0,o=12;"findPicture"===t&&(s+=12,o+=12);for(let t=s;t<o;t++){let s=0,o=0,r="",i="button-grayscale",c="button-hide";for(let e=0;e<10;e++)"right"===a.categories[t].questions[e].status?(s++,o++):"wrong"===a.categories[t].questions[e].status&&o++;o&&(r=`${s}/${o}`,i="",c="");const{imageNum:u}=a.categories[t].questions[0],l=`url('https://raw.githubusercontent.com/darya-startsava/image-data/master/img/${u}.jpg')`,d=document.createElement("div");d.classList.add("category"),d.innerHTML=`<div class="category-information">${n}&nbsp;&nbsp;&nbsp;&nbsp;${r}</div>\n            <button type="button" class="button-category-image ${i}" style="background-image:${l}"></button>\n            <button type="button" class="show-result ${c}">Смотреть<br>детали</button>`,e.append(d),n++}}();const n=document.querySelectorAll(".button-category-image"),s=document.querySelector(".back-to-start-button"),o=document.querySelectorAll(".show-result");s.addEventListener("click",h),o.forEach(((e,n)=>e.addEventListener("click",(()=>{!function(t,e){u.innerHTML='<h3 class="title">Результаты раунда:</h3>\n    <div class="result"></div>\n    <div class="results-wrapper">\n        <div class="results"></div>\n        <div class="about-picture">\n        <div class="correct-answer-image-with-information">\n            <img alt="тут должна быть картина" class="about-picture-image">\n            <div class="window-about-picture-right-block">\n                <div class="correct-answer-information">\n                </div>\n                \n                \n                <button type="button" class="hide-about-picture-button">Cкрыть</button>\n                </div>\n                </div>\n        </div>\n    </div>\n        <div class="buttons-wrapper">\n            <button type="button" class="back-to-button" id="back-to-start-button">На главную</button>\n            <button type="button" class="back-to-button" id="back-to-categories-button">Категории</button>\n        </div>';const n=document.querySelector("#back-to-start-button"),s=document.querySelector("#back-to-categories-button"),o=document.querySelector(".results"),r=document.querySelector(".result");let i=0;const c=document.querySelector(".about-picture"),l=document.querySelector(".about-picture-image"),d=document.querySelector(".correct-answer-information");document.querySelector(".hide-about-picture-button").addEventListener("click",(function(){c.style.visibility="hidden",c.style.opacity=0})),function(){for(let t=0;t<10;t++){const{imageNum:n,author:s,name:c,year:u}=a.categories[e].questions[t],l=`url('https://raw.githubusercontent.com/darya-startsava/image-data/master/img/${n}.jpg')`,d=document.createElement("button");d.dataset.num=n,d.dataset.aut=s,d.dataset.name=c,d.dataset.year=u,d.classList.add("result-picture-button"),d.classList.add("button-grayscale"),"right"===a.categories[e].questions[t].status&&(i++,d.classList.remove("button-grayscale")),r.innerHTML=`${i}/10`,d.style.backgroundImage=`${l}`,o.append(d)}}(),n.addEventListener("click",h),s.addEventListener("click",(()=>m(t))),o.addEventListener("click",(t=>{if("result-picture-button"===t.target.className||"result-picture-button button-grayscale"===t.target.className){const e=JSON.parse(t.target.dataset.num),{aut:n}=t.target.dataset,{name:s}=t.target.dataset,{year:a}=t.target.dataset;!function(t,e,n,s){c.style.visibility="visible",c.style.opacity=1,l.src=`https://raw.githubusercontent.com/darya-startsava/image-data/master/full/${t}full.jpg`,d.innerHTML=`${e}<br>\n        ${n}<br>\n        ${s}`}(e,n,s,a)}}))}(t,"findArtist"===t?n:n+12)})))),n.forEach(((e,n)=>e.addEventListener("click",(()=>{"findArtist"===t?r(t,n,0):c(t,n+12,0)}))))},g=document.querySelector("body"),b=document.querySelector("main"),p=function(){b.innerHTML='<h2 class="title">Настройки</h2>\n    <div class="settings-items">\n        <div class="settings-item">\n            <h3>Звук:</h3>\n            <label class="checkbox">\n                <input type="checkbox" id="checkbox-volume">\n                <span>вкл/выкл</span>\n            </label>\n            <div class="settings-range">\n                <input type="range" id="range-volume" min="0" max="1" step="0.1">\n                <label for="range-volume"></label>\n            </div>\n        </div>\n        <div class="settings-item">\n            <h3 class =\'time-text\'></h3>\n            <label class="checkbox">\n                <input type="checkbox" id="checkbox-time">\n                <span>вкл/выкл</span>\n            </label>\n            <div class="settings-range">\n                <input type="range" id="range-time" min="5" max="30" step="5">\n                <label for="range-time"></label>\n            </div>\n        </div>\n    </div>\n    <div class="button-wrapper">\n        <button type="button" class="back-to-start-button">На главную</button>\n    </div>',g.style.backgroundImage="none",document.querySelector(".back-to-start-button").addEventListener("click",h);const t=document.getElementById("checkbox-volume");t.checked=JSON.parse(a.settings.isVolume),t.addEventListener("change",(()=>{a.settings.isVolume=JSON.stringify(t.checked),a.settings.setIsVolume()}));const e=document.getElementById("checkbox-time");e.checked=JSON.parse(a.settings.isTime),e.addEventListener("change",(()=>{a.settings.isTime=JSON.stringify(e.checked),a.settings.setIsTime()}));const n=document.getElementById("range-volume");n.value=a.settings.volume,n.addEventListener("change",(()=>{a.settings.volume=n.value,a.settings.setVolume()}));const s=document.querySelector(".time-text"),o=document.getElementById("range-time");o.value=a.settings.time,s.innerHTML=`Время: ${a.settings.time} c`,o.addEventListener("change",(()=>{a.settings.time=o.value,a.settings.setTime(),s.innerHTML=`Время: ${a.settings.time} c`}))},y=document.querySelector("body"),v=document.querySelector("main"),h=function(){v.innerHTML='<section class="start-page">\n    <div class="start-page-wrapper">\n        <button type="button" class="settings"></button>\n        <div class="art-quiz-logo"></div>\n        <div class="start-buttons">\n            <button type="button" class="start-button button-artist-quiz">Угадать художника</button>\n            <button type="button" class="start-button button-art-quiz">Угадать картину</button>\n        </div>\n    </div>\n</section>',y.style.backgroundImage="url('./assets/img/j-retrato-de-cardenal-rafael.png')";const t=document.querySelector(".button-artist-quiz"),e=document.querySelector(".button-art-quiz"),n=document.querySelector(".settings");t.addEventListener("click",(()=>m("findArtist"))),e.addEventListener("click",(()=>m("findPicture"))),n.addEventListener("click",p)};h(),async function(){await a.buildState()}(),console.log("Анимация:    - плавное появление окна с правильным ответом.")})();