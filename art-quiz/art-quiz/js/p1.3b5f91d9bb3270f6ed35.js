(()=>{"use strict";const t=new class{constructor(){this.isVolume=localStorage.getItem("isVolume")||"false",this.volume=localStorage.getItem("volume")||.1,this.isTime=localStorage.getItem("isTime")||"false",this.time=localStorage.getItem("time")||20}setIsVolume(){localStorage.setItem("isVolume",this.isVolume)}setVolume(){localStorage.setItem("volume",this.volume)}setIsTime(){localStorage.setItem("isTime",this.isTime)}setTime(){localStorage.setItem("time",this.time)}},e=class{constructor(){this.questions=[]}},n=class{constructor(t){this.imageNum=t,this.title=null,this.type=null,this.options=[],this.author=null,this.name=null,this.year=null,this.status=null,this.loadStatus()}setStatus(t){let e;localStorage.getItem("statusArr")||(e=["no answers"],localStorage.setItem("statusArr",JSON.stringify(e))),this.status=t,e=JSON.parse(localStorage.getItem("statusArr")),e[this.imageNum]=this.status,localStorage.setItem("statusArr",JSON.stringify(e))}loadStatus(){let t;localStorage.getItem("statusArr")||(t=[],localStorage.setItem("statusArr",JSON.stringify(t))),this.status=JSON.parse(localStorage.getItem("statusArr"))[this.imageNum]}},s=class{constructor(t,e,n,s,o){this.imageNum=t,this.author=e,this.name=n,this.year=s,this.isCorrect=o}},o=new class{constructor(){this.settings=t,this.categories=[]}async buildState(){function t(t){for(let e=t.length-1;e>0;e--){const n=Math.floor(Math.random()*(e+1));[t[e],t[n]]=[t[n],t[e]]}}function o(t){(new Image).src=t}const a=await fetch("../assets/json/images-information.json"),r=await a.json();r.forEach((({imageNum:t})=>{const e=`https://raw.githubusercontent.com/darya-startsava/image-data/master/img/${t}.jpg`;o(`https://raw.githubusercontent.com/darya-startsava/image-data/master/full/${t}full.jpg`),o(e)}));const i=o=>{let a=0,i=12;"findPicture"===o&&(a+=12,i+=12);for(let c=a;c<i;c++){const a=new e;this.categories.push(a);for(let e=0;e<10;e++){const{author:i,name:u,year:l,imageNum:d}=r[10*c+e],m=new n(d);a.questions.push(m),m.type=o,"findAuthor"===m.type?m.title="Кто автор этой картины?":m.title=`Какую из этих картин написал ${i}?`;const b=new s(d,i,u,l,!0);for(m.options.push(b),m.author=b.author,m.name=b.name,m.year=b.year;m.options.length<4;){const t=Math.floor(240*Math.random()),{author:e,name:n,year:o,imageNum:a}=r[t];if(m.options.every((t=>t.author!==e&&t.imageNum!==a))){const t=new s(a,e,n,o,!1);m.options.push(t)}}t(m.options)}}};i("findAuthor"),i("findPicture")}},a=document.querySelector("main"),r=function t(e,n,s){const r=o.categories[n].questions[s],{imageNum:i}=r;a.innerHTML=`<h3 class="title">Кто автор этой картины?</h3>\n<div class="time-left">У вас осталось 30 секунд для ответа.</div>\n<div class="image-author-quiz-wrapper">\n    <div class="image-author-quiz" id="image-author-quiz" style="background-image:url(https://raw.githubusercontent.com/darya-startsava/image-data/master/img/${i}.jpg)" ></div>\n</div>\n<div class="answers-author-quiz-wrapper">\n    <button type="button" class="answer-author-button" data-isCorrect="${r.options[0].isCorrect}" >${r.options[0].author}</button>\n    <button type="button" class="answer-author-button" data-isCorrect="${r.options[1].isCorrect}" >${r.options[1].author}</button>\n    <button type="button" class="answer-author-button" data-isCorrect="${r.options[2].isCorrect}" >${r.options[2].author}</button>\n    <button type="button" class="answer-author-button" data-isCorrect="${r.options[3].isCorrect}" >${r.options[3].author}</button>\n    <div class="window-correct-answer">\n        <div class="correct-answer-message"></div>\n        <div class="correct-answer-image-with-information">\n            <img src="https://raw.githubusercontent.com/darya-startsava/image-data/master/full/${i}full.jpg"\n                alt="тут должна быть картина" class="correct-answer-picture">\n            <div class="window-correct-answer-right-block">\n                <div class="correct-answer-information">Автор: ${r.author}<br>\n                   Название картины: ${r.name}<br>\n                    год: ${r.year}\n                </div>\n                <button type="button" class="continue-button">Продолжить</button>\n            </div>\n        </div>\n    </div>\n    <div class="end-quiz-window">\n        <div class="end-quiz-message"></div>\n        <button type="button" class="back-to-button" id="go-to-categories-button">Продолжить</button>\n    </div>\n</div>\n<div class="buttons-wrapper">\n    <button type="button" class="back-to-button" id="back-to-start-button" >На главную</button>\n    <button type="button" class="back-to-button" id="back-to-categories-button">Категории</button>\n</div>`;const c=document.querySelector(".answers-author-quiz-wrapper"),u=document.querySelector("#back-to-start-button"),l=document.querySelector("#back-to-categories-button"),d=document.querySelector("#go-to-categories-button"),b=document.querySelector(".continue-button"),g=document.querySelector(".window-correct-answer"),y=document.querySelector(".correct-answer-message"),p=document.querySelector(".end-quiz-window"),v=document.querySelector(".end-quiz-message");d.addEventListener("click",(()=>m(e))),u.addEventListener("click",h),l.addEventListener("click",(()=>m(e))),c.addEventListener("click",(t=>{var e;"answer-author-button"===t.target.className&&(e=JSON.parse(t.target.dataset.iscorrect),g.style.visibility="visible",g.style.opacity=1,e?(g.style.backgroundColor="var(--right-answer-color)",y.innerHTML="Верно!",r.setStatus("right")):(g.style.backgroundColor="var(--wrong-answer-color)",y.innerHTML="Неверно.",r.setStatus("wrong")))})),b.addEventListener("click",(function(){g.style.display="none",9===s?function(){p.style.visibility="visible",p.style.opacity=1,p.style.backgroundColor="var(--end-quiz-color)";let t=0;for(let e of o.categories[n].questions)"right"===e.status&&t++;v.innerHTML=` Конец игры! <br> Ваш результат:<br> ${t}/10`}():(s++,t(e,n,s))}))},i=document.querySelector("main"),c=function t(e,n,s){const a=o.categories[n].questions[s],{imageNum:r}=a;i.innerHTML=`<h3 class="title">Какую картину написал<br> ${a.author} ?</h3>\n        <div class="time-left">У вас осталось 30 секунд для ответа.</div>\n        <div class="answers-pictures-quiz-wrapper">\n            <button type="button" class="answer-picture-button" style="background-image:url(https://raw.githubusercontent.com/darya-startsava/image-data/master/img/${a.options[0].imageNum}.jpg)" data-isCorrect="${a.options[0].isCorrect}" ></button>\n            <button type="button" class="answer-picture-button" style="background-image:url(https://raw.githubusercontent.com/darya-startsava/image-data/master/img/${a.options[1].imageNum}.jpg)" data-isCorrect="${a.options[1].isCorrect}" ></button>\n            <button type="button" class="answer-picture-button" style="background-image:url(https://raw.githubusercontent.com/darya-startsava/image-data/master/img/${a.options[2].imageNum}.jpg)" data-isCorrect="${a.options[2].isCorrect}" ></button>\n            <button type="button" class="answer-picture-button" style="background-image:url(https://raw.githubusercontent.com/darya-startsava/image-data/master/img/${a.options[3].imageNum}.jpg)" data-isCorrect="${a.options[3].isCorrect}" ></button>\n            <div class="window-correct-answer">\n                <div class="correct-answer-message"></div>\n                <div class="correct-answer-image-with-information">\n                    <img src="https://raw.githubusercontent.com/darya-startsava/image-data/master/full/${r}full.jpg"\n                        alt="тут должна быть картина" class="correct-answer-picture">\n                    <div class="window-correct-answer-right-block">\n                        <div class="correct-answer-information">Автор: ${a.author}<br>\n                            name: ${a.name}<br>\n                            year: ${a.year}\n                        </div>\n                        <button type="button" class="continue-button">Продолжить</button>\n                    </div>\n                </div>\n            </div>\n        <div class="end-quiz-window">\n            <div class="end-quiz-message"></div>\n            <button type="button" class="back-to-button" id="go-to-categories-button">Продолжить</button>\n        </div>\n    </div>\n    <div class="buttons-wrapper">\n        <button type="button" class="back-to-button" id="back-to-start-button">На главную</button>\n        <button type="button" class="back-to-button" id="back-to-categories-button">Категории</button>\n    </div>`;const c=document.querySelector(".answers-pictures-quiz-wrapper"),u=document.querySelector("#back-to-start-button"),l=document.querySelector("#back-to-categories-button"),d=document.querySelector("#go-to-categories-button"),b=document.querySelector(".continue-button"),g=document.querySelector(".window-correct-answer"),y=document.querySelector(".correct-answer-message"),p=document.querySelector(".end-quiz-window"),v=document.querySelector(".end-quiz-message");d.addEventListener("click",(()=>m(e))),u.addEventListener("click",h),l.addEventListener("click",(()=>m(e))),c.addEventListener("click",(t=>{var e;"answer-picture-button"===t.target.className&&(e=JSON.parse(t.target.dataset.iscorrect),g.style.visibility="visible",g.style.opacity=1,e?(g.style.backgroundColor="var(--right-answer-color)",y.innerHTML="Верно!",a.setStatus("right")):(g.style.backgroundColor="var(--wrong-answer-color)",y.innerHTML="Неверно.",a.setStatus("wrong")))})),b.addEventListener("click",(function(){g.style.display="none",9===s?function(){p.style.visibility="visible",p.style.opacity=1,p.style.backgroundColor="var(--end-quiz-color)";let t=0;for(const e of o.categories[n].questions)"right"===e.status&&t++;v.innerHTML=` Конец игры! <br> Ваш результат:<br> ${t}/10`}():(s++,t(e,n,s))}))},u=document.querySelector("main"),l=document.querySelector("body"),d=document.querySelector("main"),m=function(t){d.innerHTML='<h2 class="title">Категории</h2>\n    <h3 class="title" id="category-title"></h3>\n    <div class="categories-wrapper">\n        <div class="categories">\n        </div>\n    </div>\n    <div class="button-wrapper">\n        <button type="button" class="back-to-start-button">На главную</button>\n    </div>',l.style.backgroundImage="none";document.getElementById("category-title").innerHTML="findArtist"===t?"Угадайте автора картины":"Угадайте картину по автору";const e=document.querySelector(".categories");!function(){let n=1,s=0,a=12;"findPicture"===t&&(s+=12,a+=12);for(let t=s;t<a;t++){let s=0,a=0,r="",i="button-grayscale",c="button-hide";for(let e=0;e<10;e++)"right"===o.categories[t].questions[e].status?(s++,a++):"wrong"===o.categories[t].questions[e].status&&a++;a&&(r=`${s}/${a}`,i="",c="");const{imageNum:u}=o.categories[t].questions[0],l=`url('https://raw.githubusercontent.com/darya-startsava/image-data/master/img/${u}.jpg')`,d=document.createElement("div");d.classList.add("category"),d.innerHTML=`<div class="category-information">${n}&nbsp;&nbsp;&nbsp;&nbsp;${r}</div>\n            <button type="button" class="button-category-image ${i}" style="background-image:${l}"></button>\n            <button type="button" class="show-result ${c}">Смотреть<br>детали</button>`,e.append(d),n++}}();const n=document.querySelectorAll(".button-category-image"),s=document.querySelector(".back-to-start-button"),a=document.querySelectorAll(".show-result");s.addEventListener("click",h),a.forEach(((e,n)=>e.addEventListener("click",(()=>{!function(t,e){u.innerHTML='<h3 class="title">Результаты раунда:</h3>\n    <div class="result"></div>\n    <div class="results-wrapper">\n        <div class="results"></div>\n        <div class="about-picture">\n        <div class="correct-answer-image-with-information">\n            <img alt="тут должна быть картина" class="about-picture-image">\n            <div class="window-about-picture-right-block">\n                <div class="correct-answer-information">Автор: {question.author}<br>\n                            name: {question.name}<br>\n                            year: {question.year}\n                </div>\n                \n                \n                <button type="button" class="hide-about-picture-button">Cкрыть</button>\n                </div>\n                </div>\n        </div>\n    </div>\n        <div class="buttons-wrapper">\n            <button type="button" class="back-to-button" id="back-to-start-button">На главную</button>\n            <button type="button" class="back-to-button" id="back-to-categories-button">Категории</button>\n        </div>';const n=document.querySelector("#back-to-start-button"),s=document.querySelector("#back-to-categories-button"),a=document.querySelector(".results"),r=document.querySelector(".result");let i=0;const c=document.querySelector(".about-picture"),l=document.querySelector(".about-picture-image");document.querySelector(".hide-about-picture-button").addEventListener("click",(function(){c.style.visibility="hidden",c.style.opacity=0})),function(){for(let t=0;t<10;t++){const{imageNum:n}=o.categories[e].questions[t],s=`url('https://raw.githubusercontent.com/darya-startsava/image-data/master/img/${n}.jpg')`,c=document.createElement("button");c.dataset.num=n,c.classList.add("result-picture-button"),c.classList.add("button-grayscale"),"right"===o.categories[e].questions[t].status&&(i++,c.classList.remove("button-grayscale")),r.innerHTML=`${i}/10`,c.style.backgroundImage=`${s}`,a.append(c)}}(),n.addEventListener("click",h),s.addEventListener("click",(()=>m(t))),a.addEventListener("click",(t=>{var e;"result-picture-button"!==t.target.className&&"result-picture-button button-grayscale"!==t.target.className||(e=JSON.parse(t.target.dataset.num),c.style.visibility="visible",c.style.opacity=1,l.src=`https://raw.githubusercontent.com/darya-startsava/image-data/master/full/${e}full.jpg`)}))}(t,"findArtist"===t?n:n+12)})))),n.forEach(((e,n)=>e.addEventListener("click",(()=>{"findArtist"===t?r(t,n,0):c(t,n+12,0)}))))},b=document.querySelector("body"),g=document.querySelector("main"),y=function(){g.innerHTML='<h2 class="title">Настройки</h2>\n    <div class="settings-items">\n        <div class="settings-item">\n            <h3>Звук:</h3>\n            <label class="checkbox">\n                <input type="checkbox" id="checkbox-volume">\n                <span>вкл/выкл</span>\n            </label>\n            <div class="settings-range">\n                <input type="range" id="range-volume" min="0" max="1" step="0.1">\n                <label for="range-volume"></label>\n            </div>\n        </div>\n        <div class="settings-item">\n            <h3 class =\'time-text\'></h3>\n            <label class="checkbox">\n                <input type="checkbox" id="checkbox-time">\n                <span>вкл/выкл</span>\n            </label>\n            <div class="settings-range">\n                <input type="range" id="range-time" min="5" max="30" step="5">\n                <label for="range-time"></label>\n            </div>\n        </div>\n    </div>\n    <div class="button-wrapper">\n        <button type="button" class="back-to-start-button">На главную</button>\n    </div>',b.style.backgroundImage="none",document.querySelector(".back-to-start-button").addEventListener("click",h);const t=document.getElementById("checkbox-volume");t.checked=JSON.parse(o.settings.isVolume),t.addEventListener("change",(()=>{o.settings.isVolume=JSON.stringify(t.checked),o.settings.setIsVolume()}));const e=document.getElementById("checkbox-time");e.checked=JSON.parse(o.settings.isTime),e.addEventListener("change",(()=>{o.settings.isTime=JSON.stringify(e.checked),o.settings.setIsTime()}));const n=document.getElementById("range-volume");n.value=o.settings.volume,n.addEventListener("change",(()=>{o.settings.volume=n.value,o.settings.setVolume()}));const s=document.querySelector(".time-text"),a=document.getElementById("range-time");a.value=o.settings.time,s.innerHTML=`Время: ${o.settings.time} c`,a.addEventListener("change",(()=>{o.settings.time=a.value,o.settings.setTime(),s.innerHTML=`Время: ${o.settings.time} c`}))},p=document.querySelector("body"),v=document.querySelector("main"),h=function(){v.innerHTML='<section class="start-page">\n    <div class="start-page-wrapper">\n        <button type="button" class="settings"></button>\n        <div class="art-quiz-logo"></div>\n        <div class="start-buttons">\n            <button type="button" class="start-button button-artist-quiz">Угадать художника</button>\n            <button type="button" class="start-button button-art-quiz">Угадать картину</button>\n        </div>\n    </div>\n</section>',p.style.backgroundImage="url('./assets/img/j-retrato-de-cardenal-rafael.png')";const t=document.querySelector(".button-artist-quiz"),e=document.querySelector(".button-art-quiz"),n=document.querySelector(".settings");t.addEventListener("click",(()=>m("findArtist"))),e.addEventListener("click",(()=>m("findPicture"))),n.addEventListener("click",y)};h(),async function(){await o.buildState()}(),console.log("Анимация:    - плавное появление окна с правильным ответом.")})();