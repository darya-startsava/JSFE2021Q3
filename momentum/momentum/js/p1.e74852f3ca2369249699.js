(()=>{"use strict";let e=localStorage.getItem("lang")||"en";const t=document.querySelectorAll(".input-language"),n=document.querySelectorAll(".language"),o={en:{"greeting.morning":"Good morning,","greeting.afternoon":"Good afternoon,","greeting.evening":"Good evening,","greeting.night":"Good night,","placeholder.name":"[Enter your name]","date.language":"en-US","default.city":"Minsk","weather.wind":"Wind speed:","wind.dimension":"m/s","weather.humidity":"Humidity:","settings.language":"Choose language:","settings.en":"English","settings.ru":"Russian","settings.background":"Background:","settings.background.exp":"Take background from","settings.tag":"Tag:","settings.tag.exp":"Set background tag","settings.show.hide":"Show/hide:","show.time":"Time","show.date":"Date","show.greeting":"Greeting","show.quote":"Quote","show.weather":"Weather","show.player":"Player"},ru:{"greeting.morning":"Доброе утро,","greeting.afternoon":"Добрый день,","greeting.evening":"Добрый вечер,","greeting.night":"Доброй ночи,","placeholder.name":"[Ваше имя]","date.language":"ru-RU","default.city":"Минск","weather.wind":"Скорость ветра:","wind.dimension":"м/с","weather.humidity":"Влажность:","settings.language":"Выберите язык:","settings.en":"Английский","settings.ru":"Русский","settings.background":"Фон:","settings.background.exp":"Источник фонового изображения","settings.tag":"Тег:","settings.tag.exp":"Установить тег для фона","settings.show.hide":"Показать/спрятать:","show.time":"Время","show.date":"Дата","show.greeting":"Приветствие","show.quote":"Цитата","show.weather":"Погода","show.player":"Плеер"}};function a(t){return o[e][t]}const r=document.querySelector(".greeting"),s=document.querySelector(".name");const c=document.querySelector(".time"),i=document.querySelector(".date");function u(){const e=(new Date).toLocaleDateString(a("date.language"),{weekday:"long",month:"long",day:"numeric"});i.textContent=e,setTimeout(u,1e3)}const d=document.querySelector(".body"),l=document.querySelector(".slide-next"),g=document.querySelector(".slide-prev");let m=localStorage.getItem("background")||"gitHub",h=Math.floor(20*Math.random())+1,y=h.toString().padStart(2,0);function w(){const e=new Image;e.src=`https://raw.githubusercontent.com/darya-startsava/stage1-tasks/assets/images/${function(){const e=(new Date).getHours();switch(Math.floor(e/6)){case 1:return"morning";case 2:return"afternoon";case 3:return"evening";case 0:return"night"}}()}/${y}.jpg`,e.onload=()=>{d.style.backgroundImage=`url(${e.src})`}}const S=document.querySelector(".weather-icon"),p=document.querySelector(".temperature"),v=document.querySelector(".weather-description"),f=document.querySelector(".wind"),q=document.querySelector(".humidity"),L=document.querySelector(".weather-error"),x=document.querySelector(".city");async function C(){const t=`https://api.openweathermap.org/data/2.5/weather?q=${x.value}&lang=${e}&appid=e4f05c638c1d3df262d927daf0594260&units=metric`,n=await fetch(t),o=await n.json();o.name?(L.textContent="",S.className="weather-icon owf",S.classList.add(`owf-${o.weather[0].id}`),p.textContent=`${Math.round(o.main.temp)}°C`,v.textContent=o.weather[0].description,f.textContent=`${a("weather.wind")} ${Math.round(o.wind.speed)} ${a("wind.dimension")}`,q.textContent=`${a("weather.humidity")} ${Math.round(o.main.humidity)} %`,localStorage.setItem("city",x.value)):(L.textContent="Please, enter correct city",S.className="weather-icon owf",p.textContent="",v.textContent="",f.textContent="",q.textContent="")}function k(){localStorage.getItem("city")&&"Minsk"!=localStorage.getItem("city")&&"Минск"!=localStorage.getItem("city")?x.value=localStorage.getItem("city"):x.value=a("default.city")}const E=document.querySelector(".quote"),b=document.querySelector(".author"),I=document.querySelector(".change-quote");async function $(){const t=`./assets/json/data_${e}.json`,n=await fetch(t),o=await n.json();let a=Math.floor(20*Math.random());E.textContent=`${o.quotes[a].quote}`,b.textContent=`${o.quotes[a].author}`}const M=[{title:"Aqua Caelestis",src:"./assets/sounds/Aqua Caelestis.mp3",duration:"00:39"},{title:"Ennio Morricone",src:"./assets/sounds/Ennio Morricone.mp3",duration:"01:37"},{title:"River Flows In You",src:"./assets/sounds/River Flows In You.mp3",duration:"01:37"},{title:"Summer Wind",src:"./assets/sounds/Summer Wind.mp3",duration:"01:50"}],T=document.querySelector(".play-button"),A=document.querySelector(".play-prev"),D=document.querySelector(".play-next"),H=document.querySelector(".play-list"),j=document.querySelector(".timeline"),G=document.querySelector(".volume"),R=document.querySelector(".volume-percentage"),W=document.querySelector(".sound");let B;const U=new Audio;let F=!1,N=0;function P(){F=!1,N==M.length-1?N=0:N+=1,Y()}function X(){const e=document.querySelectorAll(".play-item");e.forEach((e=>{e.classList.remove("item-active"),e.classList.remove("paused-item")})),e[N].classList.add("item-active"),F?e[N].classList.add("paused-item"):e[N].classList.remove("paused-item")}function Y(){F?(T.classList.add("play"),T.classList.remove("pause"),F=!1):(T.classList.add("pause"),T.classList.remove("play"),F=!0),F?(U.src=M[N].src,U.play()):U.pause(),X()}const Q=document.querySelector(".radiobutton-text"),_=document.getElementById("english-language"),z=document.getElementById("russian-language"),J=document.querySelector(".set-background-text"),K=document.querySelector(".set-background-text-explanation"),O=document.querySelectorAll(".background"),V=document.querySelector(".input-show-time"),Z=document.querySelector(".set-tag-text"),ee=document.querySelector(".set-tag-text-explanation"),te=document.querySelector(".show-time-text"),ne=document.querySelector(".show-time"),oe=document.querySelector(".show-date"),ae=document.querySelector(".show-greeting"),re=document.querySelector(".show-quote"),se=document.querySelector(".show-weather"),ce=document.querySelector(".show-player");!function e(){const t=(new Date).toLocaleTimeString("en-US",{hour12:!1});c.textContent=t,u(),r.textContent=function(){const e=(new Date).getHours();switch(Math.floor(e/6)){case 1:return a("greeting.morning");case 2:return a("greeting.afternoon");case 3:return a("greeting.evening");case 0:return a("greeting.night")}}(),s.placeholder=localStorage.getItem("name")||a("placeholder.name"),setTimeout(e,1e3)}(),window.addEventListener("beforeunload",(function(){localStorage.setItem("name",s.value)})),window.addEventListener("load",(function(){localStorage.getItem("name")&&(s.value=localStorage.getItem("name"))})),w(),l.addEventListener("click",(function(){y=20==h?"01":(h+1).toString().padStart(2,0),h=+y,w()})),g.addEventListener("click",(function(){y=1==h?"20":(h-1).toString().padStart(2,0),h=+y,w()})),x.value||k(),C(),x.addEventListener("change",C),window.addEventListener("beforeunload",(function(){localStorage.setItem("city",x.value)})),window.addEventListener("load",k),$(),I.addEventListener("click",$),function(){for(let e=0;e<M.length;e++){const t=document.createElement("li");t.classList.add("play-item"),t.textContent=`${M[e].title} | ${M[e].duration}`,H.append(t)}B=document.querySelectorAll(".play-item")}(),X(),T.addEventListener("click",Y),A.addEventListener("click",(function(){F=!1,0==N?N=M.length-1:N-=1,Y()})),D.addEventListener("click",P),U.addEventListener("loadeddata",(function(){const e=document.querySelector(".length"),t=document.querySelector(".track-name");e.textContent=`${M[N].duration}`,t.textContent=`${M[N].title}`})),U.addEventListener("timeupdate",(function(){const e=document.querySelector(".current"),t=document.querySelector(".progress");let n=parseInt(U.currentTime%60),o=parseInt(U.currentTime/60%60);e.innerHTML=o.toString().padStart(2,0)+":"+n.toString().padStart(2,0),t.style.width=U.currentTime/U.duration*100+"%"})),j.addEventListener("click",(function(e){const t=window.getComputedStyle(j).width,n=e.offsetX/parseInt(t)*U.duration;U.currentTime=n})),G.addEventListener("click",(function(e){const t=window.getComputedStyle(G).width,n=e.offsetX/parseInt(t);U.volume=n,R.style.width=100*n+"%"})),W.addEventListener("click",(function(){U.volume||!U.muted?(U.muted=!0,U.volume=0,R.style.width=0,W.classList.remove("sound-on"),W.classList.add("sound-off")):(U.muted=!1,U.volume=.5,R.style.width="50%",W.classList.remove("sound-off"),W.classList.add("sound-on"))})),U.addEventListener("ended",P),B.forEach(((e,t)=>{e.addEventListener("click",(()=>function(e,t){e.classList.contains("paused-item")?(e.classList.remove("paused-item"),Y()):(B.forEach((e=>{e.classList.remove("paused-item")})),e.classList.add("paused-item"),N=t,F=!1,Y())}(e,t)))})),t.forEach(((e,t)=>{e.addEventListener("change",(()=>function(e,t){var n;n=e.value,localStorage.setItem("lang",n),location.reload()}(e)))})),window.addEventListener("load",(function(){Q.textContent=a("settings.language"),_.textContent=a("settings.en"),z.textContent=a("settings.ru"),n.forEach((e=>{e.classList.remove("language-active")})),"en"==e?n[0].classList.add("language-active"):n[1].classList.add("language-active"),J.textContent=a("settings.background"),K.textContent=a("settings.background.exp"),O.forEach((e=>{e.classList.remove("background-active")})),"gitHub"==m?O[0].classList.add("background-active"):"unsplash"==m?O[1].classList.add("background-active"):O[2].classList.add("background-active"),Z.textContent=a("settings.tag"),ee.textContent=a("settings.tag.exp"),te.textContent=a("settings.show.hide"),ne.textContent=a("show.time"),oe.textContent=a("show.date"),ae.textContent=a("show.greeting"),re.textContent=a("show.quote"),se.textContent=a("show.weather"),ce.textContent=a("show.player")})),V.addEventListener("change",(function(){V.checked?c.style.opacity="1":c.style.opacity="0"}))})();